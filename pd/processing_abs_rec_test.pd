#N canvas 0 96 1920 984 12;
#X text 150 78 dimm wert fuer lampe (und gui);
#X text 152 93 brightness in relation to sensor distance;
#X text 109 -16 cut all values above 255;
#X msg 98 8 255;
#X obj 38 -19 moses 255;
#X obj 483 3 s \$0-init;
#X text 943 936 flag to indicate activity on a lamp/sensor;
#X msg 879 895 1;
#X msg 833 893 0;
#X obj 833 866 route 1;
#X text 161 -238 1..255 from arduino;
#X text 491 -236 255 oder 1 from mouse;
#X obj 483 -21 r \$3-processing_workaround_loadbang;
#X obj 17 -244 r \$1-\$2-sensor_data;
#X obj 38 88 s \$1-\$2-dimval;
#X obj 833 821 r \$3-sensor_data;
#X obj 955 821 r \$3-mouse_trigger;
#X obj 833 939 s \$1-\$2-active;
#X obj 486 937 s serial_output;
#X obj 619 528 int;
#X obj 920 453 r \$0-brett_indicator_dec;
#X msg 920 553 set \$1;
#X obj 619 561 t f b b;
#X obj 665 598 s \$0-get_brett_indic_dec;
#X obj 936 592 r \$0-lamp_indicator_dec;
#X obj 642 625 s \$0-get_lamp_indic_dec;
#X obj 920 521 makefilename B%dL%%dV;
#X obj 920 652 makefilename;
#X obj 619 694 pack f s;
#X obj 1209 434 r \$3-lamp_indicator_decimal;
#X obj 1191 461 f 0;
#X obj 1425 438 r \$3-brett_indicator_decimal;
#X obj 1407 464 f 0;
#X obj 1191 515 s \$0-lamp_indicator_dec;
#X obj 1407 516 s \$0-brett_indicator_dec;
#X obj 1191 401 r \$0-get_lamp_indic_dec;
#X obj 1407 399 r \$0-get_brett_indic_dec;
#X text 1188 341 workaround to store the abstractions' creation arguments
for later use ([f $xy] does not work in dynamically created absstractions)
;
#X text 790 126 22/3/22 \; this subpatch builds up a string from the
decimal brett-id and lamp-id and also puts in the current dimVal. \;
Goal: Send this stuff over to the arduino in order to route the correct
dimValue to the correct lamp. \; Form of the string: B1L24V255@ \;
B: Brett-id \; L: Lamp-id \; V: DimValue \; @: terminating character
;
#X obj 920 477 + 1;
#X text 952 478 Physical brett starts at 1;
#X obj 936 616 + 1;
#X text 974 614 Physical lamp starts at 1;
#X msg 619 718 symbol \$2\$1@;
#X obj 644 759 print;
#X obj 1156 422 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1237 487 print;
#X obj 612 486 r \$1-\$2-dimval;
#X text 606 939 z.B. B1L4V200@;
#X obj 1355 667 r \$1-\$2-dimval;
#X obj 1355 710 moses 90;
#X obj 1408 748 t f b;
#X obj 1440 781 s \$0-get_lamp_indic_dec;
#X obj 1461 814 r \$0-lamp_indicator_dec;
#X obj 1461 839 + 1;
#X text 1496 835 Physical brett starts at 1;
#X obj 1408 865 pack f f;
#X text 1432 706 dimval-threshold for triggering audio;
#X obj 1373 935 s AUDIO_INFO;
#X text 1489 933 dimval : brett_indicator_dec;
#X obj 1260 701 print;
#X obj 179 -144 print data;
#X obj 228 -86 print smooh out;
#X obj 17 -146 data_smoothing3;
#X connect 3 0 14 0;
#X connect 4 0 14 0;
#X connect 4 1 3 0;
#X connect 7 0 17 0;
#X connect 8 0 17 0;
#X connect 9 0 8 0;
#X connect 9 1 7 0;
#X connect 12 0 5 0;
#X connect 13 0 63 0;
#X connect 15 0 9 0;
#X connect 16 0 9 0;
#X connect 19 0 22 0;
#X connect 20 0 39 0;
#X connect 21 0 27 0;
#X connect 22 0 28 0;
#X connect 22 1 25 0;
#X connect 22 2 23 0;
#X connect 24 0 41 0;
#X connect 26 0 21 0;
#X connect 27 0 28 1;
#X connect 28 0 43 0;
#X connect 29 0 30 1;
#X connect 30 0 33 0;
#X connect 31 0 32 1;
#X connect 32 0 34 0;
#X connect 35 0 30 0;
#X connect 36 0 32 0;
#X connect 39 0 26 0;
#X connect 41 0 27 0;
#X connect 43 0 18 0;
#X connect 45 0 30 0;
#X connect 47 0 19 0;
#X connect 49 0 50 0;
#X connect 50 1 51 0;
#X connect 51 0 56 0;
#X connect 51 1 52 0;
#X connect 53 0 54 0;
#X connect 54 0 56 1;
#X connect 56 0 58 0;
#X connect 63 0 4 0;
